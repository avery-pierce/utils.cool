{"version":3,"file":"component---src-pages-timer-js-d24518c76083df3d2e39.js","mappings":"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","sources":["webpack://utils-cool/./src/components/CoolText.js","webpack://utils-cool/./src/components/CoolMobileFullscreenLayout.js","webpack://utils-cool/./src/hooks/useLocalStorageState.js","webpack://utils-cool/./src/pages/timer.js","webpack://utils-cool/./src/hooks/useCurrentDate.js"],"sourcesContent":["import React from \"react\"\n\nexport function CoolTitle({ children, style }) {\n  return (\n    <h1 style={{\n      fontFamily: \"Monoton\",\n      textTransform: \"uppercase\",\n      fontWeight: \"normal\",\n      fontSize: \"30pt\",\n      color: \"#FFF\",\n      ...style\n    }}>{children}</h1>\n  )\n}\n\nexport default function CoolText({ children, style, bold }) {\n  return (\n    <span style={{\n      fontFamily: \"Roboto\",\n      fontWeight: bold ? \"500\" : \"normal\",\n      color: \"#FFF\",\n      ...style,\n    }}>\n      {children}\n    </span>\n  )\n}","import React from \"react\"\n\nexport default function CoolMobileFullscreenLayout({ children, style }) {\n  return (\n    <div style={{ \n      display: \"flex\", \n      position: \"fixed\", \n      top: 0, \n      left: 0, \n      bottom: 0, \n      right: 0, \n      flex: 1, \n      flexDirection: \"column\",\n      ...style,\n    }}>\n      {children}\n    </div>\n  )\n}","import { useCallback, useState } from \"react\"\n\n/// Works like `useState`, except values are persisted to localStorage.\nexport default function useLocalStorageState(key, defaultValue, serialize = (v) => v, deserialize = (v) => v) {\n\n  // getLocalObject doesn't differentiate between explicitly setting null\n  // and state that's never been set. Use isLocalObjectPopulated to affirmatively\n  // determine whether state has ever been set.\n  const initialValue = isLocalObjectPopulated(key) ? deserialize(getLocalObject(key)) : defaultValue\n  const [state, setState] = useState(initialValue)\n\n  const setLocalStorageState = useCallback((newValue) => {\n    const normalizedValue = serialize(newValue)\n    setLocalObject(key, normalizedValue)\n    setState(newValue)\n  }, [])\n\n  const resetLocalStorageState = useCallback(() => {\n    removeLocalObject(key)\n  }, [])\n\n  return [state, setLocalStorageState, resetLocalStorageState]\n}\n\n/// Deserialize the json object stored in local storage\nfunction getLocalObject(key) {\n  if (typeof window === \"undefined\") return null\n  const value = window.localStorage.getItem(key)\n  return JSON.parse(value)\n}\n\n/// Returns `true` if this key has never been populated.\nfunction isLocalObjectPopulated(key) {\n  if (typeof window === \"undefined\") return false\n  return window.localStorage.getItem(key) !== null\n}\n\n/// Set a JSON object to local storage state\nfunction setLocalObject(key, obj) {\n  if (typeof window === \"undefined\") return\n  const stringified = JSON.stringify(obj)\n  return window.localStorage.setItem(key, stringified)\n}\n\n/// Removes the value at this key from storage\nfunction removeLocalObject(key) {\n  if (typeof window === \"undefined\") return\n  return window.localStorage.removeItem(key)\n}\n\nexport const dateSerilaizer = (date) => {\n  if (date === null) { return null }\n  return date.getTime()\n}\n\nexport const dateDeserializer = (ms) => {\n  return new Date(ms)\n}\n\nexport const arraySerializer = (elementSerializer) => {\n  return (array) => {\n    return array.map(elementSerializer)\n  }\n}\n\nexport const arrayDeserializer = (elementDeserializer) => {\n  return (array) => {\n    return array.map(elementDeserializer)\n  }\n}","import React, { useCallback } from 'react';\nimport CoolMobileFullscreenLayout from '../components/CoolMobileFullscreenLayout';\nimport useCurrentDate from \"../hooks/useCurrentDate\"\nimport CoolText from '../components/CoolText';\nimport useLocalStorageState, { dateSerilaizer, dateDeserializer, arraySerializer, arrayDeserializer } from '../hooks/useLocalStorageState';\n\nconst Timer = () => {\n  const [startDate, setStartDate] = useLocalStorageState(\"timer.startDate\", null, dateSerilaizer, dateDeserializer)\n  const [stopDate, setStopDate] = useLocalStorageState(\"timer.stopDate\", null, dateSerilaizer, dateDeserializer)\n  const [laps, setLaps] = useLocalStorageState(\"timer.laps\", [], arraySerializer(dateSerilaizer), arrayDeserializer(dateDeserializer))\n  \n  const elapsed = useSecondsElapsed(startDate, stopDate)\n  const onStart = useCallback(() => {\n    setStartDate(new Date()) \n    setStopDate(null)\n    setLaps([])\n  }, [])\n\n  const onStop = useCallback(() => {\n    setStopDate(new Date())\n  }, [])\n\n  const onTapLap = useCallback(() => {\n    const newLaps = [\n      ...laps,\n      new Date(),\n    ]\n    setLaps(newLaps)\n  }, [laps])\n\n  const lapD = lapDeltas(startDate, laps)\n  const isTimerRunning = (!!startDate && !stopDate)\n  return (\n    <CoolMobileFullscreenLayout>\n      <div style={{ flexGrow: 1 }}>\n      </div>\n      <div style={{ padding: \"1em\", flexShrink: 2 }}>\n        <div style={{\n          background: \"rgba(233, 233, 233, 0.65)\",\n          boxShadow: \"0px 4px 12px rgba(0, 0, 0, 0.2)\",\n          borderRadius: 8,\n          padding: \"1em\",\n        }}>\n          {lapD.map((lapTime, i) => (\n            <LapDetail \n              key={lapTime.date.getTime()}\n              index={i} \n              durationSeconds={lapTime.duration / 1000} \n              deltaSeconds={lapTime.delta / 1000} \n              timestamp={lapTime.date} />\n          ))}\n        </div>\n      </div>\n      <div style={{ padding: \"1em\" }}>\n        <CoolText bold style={{\n          display: \"block\",\n          textAlign: \"center\",\n          fontSize: \"60pt\",\n        }}>{formatTimeInterval(elapsed)}</CoolText>\n      </div>\n      <StopwatchControls\n        onStart={onStart}\n        onStop={onStop}\n        onLap={onTapLap}\n        isTimerRunning={isTimerRunning} />\n    </CoolMobileFullscreenLayout>\n  )\n}\n\nconst secondFormatter = new Intl.NumberFormat(\"en-US\", { \n  minimumIntegerDigits: 2, \n  minimumFractionDigits: 2, \n  maximumFractionDigits: 2,\n})\n\nfunction formatTimeInterval(seconds) {\n  const minutes = Math.floor(seconds / 60);\n  const remainingSeconds = seconds % 60;\n  const formattedSeconds = secondFormatter.format(remainingSeconds)\n  return `${minutes}:${formattedSeconds}`\n}\n\nfunction StopwatchControls({ onStart, onStop, onLap, isTimerRunning }) {\n  return(\n    <div style={{ display: \"flex\", flexDirection: \"row\" }}>\n      {!isTimerRunning && <CoolButton onClick={onStart} style={{ flex: 1, margin: \"1em\", backgroundColor: \"green\" }}>Start</CoolButton>}\n      {isTimerRunning && <CoolButton onClick={onLap} style={{ flex: 1, margin: \"1em\", backgroundColor: \"blue\" }}>Lap</CoolButton>}\n      <CoolButton disabled={!isTimerRunning} onClick={onStop} style={{ flex: 1, margin: \"1em\", marginLeft: 0, backgroundColor: \"red\" }}>Stop</CoolButton>\n    </div>\n  )\n}\n\nfunction CoolButton({ children, onClick, style, disabled }) {\n  return (\n    <button onClick={onClick} style={{\n      height: \"7em\",\n      borderRadius: 8,\n      fontSize: \"15pt\",\n      border: \"none\",\n      textTransform: \"uppercase\",\n      fontWeight: \"bold\",\n      opacity: disabled ? 0.4 : 1.0,\n      ...style,\n    }}>{children}</button>\n  )\n}\n\nfunction lapDeltas(startTime, lapTimes) {\n  const lapDurations = lapTimes.map((date, i, allTimes) => {\n    const previousStop = (i === 0 ? startTime : allTimes[i - 1])\n    const lapDuration = date.getTime() - previousStop.getTime()\n    return {\n      date,\n      duration: lapDuration,\n    }\n  })\n  return lapDurations.map((duration, i, allDurations) => {\n    if (i === 0) {\n      return {\n        ...duration,\n        delta: null,\n      }\n    } else {\n      const prevDuration = allDurations[i - 1]\n      const delta = duration.duration - prevDuration.duration\n      return {\n        ...duration,\n        delta,\n      }\n    }\n  })\n}\n\nfunction LapDetail({ index, timestamp, durationSeconds, deltaSeconds }) {\n  return (\n    <div style={{\n      display: \"flex\",\n      flexDirection: \"row\",\n      margin: \"0.6em auto\",\n    }}>\n      <div style={{\n        paddingRight: \"0.4em\",\n        marginRight: \"0.4em\",\n        borderRight: \"solid 0.5px rgba(0, 0, 0, 0.5)\",\n      }}>\n        <CoolText style={{ color: \"black\" }}>{index+1}</CoolText>\n      </div>\n      <div style={{\n        display: \"flex\",\n        flexDirection: \"column\",\n      }}>\n        <span style={{fontSize: \"1.2em\"}}>\n          <CoolText style={{color: \"black\", fontWeight: \"bold\", marginRight: \"0.4em\"}}>{durationSeconds}s</CoolText>\n          <CoolText style={{color: \"black\" }}>(<CoolText style={{ color: deltaSeconds > 0 ? \"red\" : \"green\" }}>{deltaSeconds}</CoolText>)</CoolText>\n        </span>\n        <CoolText style={{color: \"black\", opacity: 0.6}}>{timestamp.toLocaleString()}</CoolText>\n      </div>\n    </div>\n  )\n}\n\nfunction useSecondsElapsed(startDate, stopDate) {\n  const currentDate = useCurrentDate(30)\n\n  if (!startDate) {\n    return 0;\n  }\n\n  const compareDate = stopDate || currentDate\n  const ms = compareDate.getTime() - startDate.getTime()\n  return ms / 1000\n}\n\nexport default Timer;","import { useState, useEffect } from \"react\"\n\nexport default function useCurrentDate(refreshRateHz = 60) {\n  const [date, setDate] = useState(new Date())\n\n  useEffect(() => {\n    const handle = setInterval(() => {\n      setDate(new Date())\n    }, 1000/refreshRateHz)\n\n    return () => clearInterval(handle)\n  }, [refreshRateHz])\n\n  return date\n}"],"names":["CoolTitle","children","style","fontFamily","textTransform","fontWeight","fontSize","color","CoolText","bold","CoolMobileFullscreenLayout","display","position","top","left","bottom","right","flex","flexDirection","useLocalStorageState","key","defaultValue","serialize","deserialize","v","initialValue","window","localStorage","getItem","isLocalObjectPopulated","value","JSON","parse","getLocalObject","useState","state","setState","setLocalStorageState","useCallback","newValue","normalizedValue","obj","stringified","stringify","setItem","setLocalObject","resetLocalStorageState","removeItem","removeLocalObject","dateSerilaizer","date","getTime","dateDeserializer","ms","Date","secondFormatter","Intl","NumberFormat","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","StopwatchControls","onStart","onStop","onLap","isTimerRunning","CoolButton","onClick","margin","backgroundColor","disabled","marginLeft","height","borderRadius","border","opacity","LapDetail","index","timestamp","durationSeconds","deltaSeconds","paddingRight","marginRight","borderRight","toLocaleString","elementDeserializer","elementSerializer","startTime","seconds","minutes","remainingSeconds","formattedSeconds","startDate","setStartDate","stopDate","setStopDate","array","map","laps","setLaps","elapsed","currentDate","refreshRateHz","setDate","useEffect","handle","setInterval","clearInterval","useCurrentDate","useSecondsElapsed","onTapLap","newLaps","lapD","i","allTimes","previousStop","lapDuration","duration","allDurations","delta","prevDuration","flexGrow","padding","flexShrink","background","boxShadow","lapTime","textAlign","Math","floor","format"],"sourceRoot":""}