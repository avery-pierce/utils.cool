{"version":3,"file":"component---src-pages-timer-js-06ede6d60a44de7e1189.js","mappings":"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","sources":["webpack://utils-cool/./src/components/CoolMobileFullscreenLayout.tsx","webpack://utils-cool/./src/components/CoolText.tsx","webpack://utils-cool/./src/hooks/useLocalStorageState.ts","webpack://utils-cool/./src/pages/timer.js","webpack://utils-cool/./src/hooks/useCurrentDate.ts"],"sourcesContent":["import React, { CSSProperties, ReactNode } from \"react\"\n\nexport default function CoolMobileFullscreenLayout({ children, style }: {\n  children?: ReactNode,\n  style?: CSSProperties,\n}) {\n  return (\n    <div style={{ \n      display: \"flex\", \n      position: \"fixed\", \n      top: 0, \n      left: 0, \n      bottom: 0, \n      right: 0, \n      flex: 1, \n      flexDirection: \"column\",\n      ...style,\n    }}>\n      {children}\n    </div>\n  )\n}","import React, { CSSProperties, ReactNode } from \"react\"\n\nexport function CoolTitle({ children, style }: { \n  children?: ReactNode | undefined,\n  style: CSSProperties\n}) {\n  return (\n    <h1 style={{\n      fontFamily: \"Monoton\",\n      textTransform: \"uppercase\",\n      fontWeight: \"normal\",\n      fontSize: \"30pt\",\n      color: \"#FFF\",\n      ...style\n    }}>{children}</h1>\n  )\n}\n\nexport default function CoolText({ children, style, bold }: {\n  children?: ReactNode | undefined,\n  style?: CSSProperties,\n  bold?: boolean\n}) {\n  return (\n    <span style={{\n      fontFamily: \"Roboto\",\n      fontWeight: bold ? 500 : \"normal\",\n      color: \"#FFF\",\n      ...style,\n    }}>\n      {children}\n    </span>\n  )\n}","import { useCallback, useState } from \"react\"\n\n/// Works like `useState`, except values are persisted to localStorage.\nexport default function useLocalStorageState<S>(key: string, defaultValue: S, serialize: (state: S) => any = (v) => v, deserialize: (localStoageObj: any) => S = (v) => v) {\n\n  // getLocalObject doesn't differentiate between explicitly setting null\n  // and state that's never been set. Use isLocalObjectPopulated to affirmatively\n  // determine whether state has ever been set.\n  const initialValue = isLocalObjectPopulated(key) ? deserialize(getLocalObject(key)) : defaultValue\n  const [state, setState] = useState(initialValue)\n\n  const setLocalStorageState = useCallback((newValue: S) => {\n    const normalizedValue = serialize(newValue)\n    setLocalObject(key, normalizedValue)\n    setState(newValue)\n  }, [])\n\n  const resetLocalStorageState = useCallback(() => {\n    removeLocalObject(key)\n  }, [])\n\n  return [state, setLocalStorageState, resetLocalStorageState]\n}\n\n/// Deserialize the json object stored in local storage\nfunction getLocalObject(key: string) {\n  if (typeof window === \"undefined\") return null\n  const value = window.localStorage.getItem(key)\n  return JSON.parse(value)\n}\n\n/// Returns `true` if this key has never been populated.\nfunction isLocalObjectPopulated(key: string) {\n  if (typeof window === \"undefined\") return false\n  return window.localStorage.getItem(key) !== null\n}\n\n/// Set a JSON object to local storage state\nfunction setLocalObject(key: string, obj: any) {\n  if (typeof window === \"undefined\") return\n  const stringified = JSON.stringify(obj)\n  return window.localStorage.setItem(key, stringified)\n}\n\n/// Removes the value at this key from storage\nfunction removeLocalObject(key: string) {\n  if (typeof window === \"undefined\") return\n  return window.localStorage.removeItem(key)\n}\n\nexport const dateSerilaizer = (date: Date) => {\n  if (date === null) { return null }\n  return date.getTime()\n}\n\nexport const dateDeserializer = (ms: number | null) => {\n  if (ms === null) { return null }\n  return new Date(ms)\n}\n\nexport const arraySerializer = <T>(elementSerializer: (el: T) => any) => {\n  return (array: T[]) => {\n    return array.map(elementSerializer)\n  }\n}\n\nexport const arrayDeserializer = <T>(elementDeserializer: (el: any) => T) => {\n  return (array: any[]) => {\n    return array.map(elementDeserializer)\n  }\n}","import React, { useCallback } from 'react';\nimport CoolMobileFullscreenLayout from '../components/CoolMobileFullscreenLayout';\nimport useCurrentDate from \"../hooks/useCurrentDate\"\nimport CoolText from '../components/CoolText';\nimport useLocalStorageState, { dateSerilaizer, dateDeserializer, arraySerializer, arrayDeserializer } from '../hooks/useLocalStorageState';\n\nconst Timer = () => {\n  const [startDate, setStartDate] = useLocalStorageState(\"timer.startDate\", null, dateSerilaizer, dateDeserializer)\n  const [stopDate, setStopDate] = useLocalStorageState(\"timer.stopDate\", null, dateSerilaizer, dateDeserializer)\n  const [laps, setLaps] = useLocalStorageState(\"timer.laps\", [], arraySerializer(dateSerilaizer), arrayDeserializer(dateDeserializer))\n  \n  const elapsed = useSecondsElapsed(startDate, stopDate)\n  const onStart = useCallback(() => {\n    setStartDate(new Date()) \n    setStopDate(null)\n    setLaps([])\n  }, [])\n\n  const onStop = useCallback(() => {\n    setStopDate(new Date())\n  }, [])\n\n  const onTapLap = useCallback(() => {\n    const newLaps = [\n      ...laps,\n      new Date(),\n    ]\n    setLaps(newLaps)\n  }, [laps])\n\n  const lapD = lapDeltas(startDate, laps)\n  const isTimerRunning = (!!startDate && !stopDate)\n  return (\n    <CoolMobileFullscreenLayout>\n      <div style={{ flexGrow: 1 }}>\n      </div>\n      <div style={{ padding: \"1em\", flexShrink: 2 }}>\n        <div style={{\n          background: \"rgba(233, 233, 233, 0.65)\",\n          boxShadow: \"0px 4px 12px rgba(0, 0, 0, 0.2)\",\n          borderRadius: 8,\n          padding: \"1em\",\n        }}>\n          {lapD.map((lapTime, i) => (\n            <LapDetail \n              key={lapTime.date.getTime()}\n              index={i} \n              durationSeconds={lapTime.duration / 1000} \n              deltaSeconds={lapTime.delta / 1000} \n              timestamp={lapTime.date} />\n          ))}\n        </div>\n      </div>\n      <div style={{ padding: \"1em\" }}>\n        <CoolText bold style={{\n          display: \"block\",\n          textAlign: \"center\",\n          fontSize: \"60pt\",\n        }}>{formatTimeInterval(elapsed)}</CoolText>\n      </div>\n      <StopwatchControls\n        onStart={onStart}\n        onStop={onStop}\n        onLap={onTapLap}\n        isTimerRunning={isTimerRunning} />\n    </CoolMobileFullscreenLayout>\n  )\n}\n\nconst secondFormatter = new Intl.NumberFormat(\"en-US\", { \n  minimumIntegerDigits: 2, \n  minimumFractionDigits: 2, \n  maximumFractionDigits: 2,\n})\n\nfunction formatTimeInterval(seconds) {\n  const minutes = Math.floor(seconds / 60);\n  const remainingSeconds = seconds % 60;\n  const formattedSeconds = secondFormatter.format(remainingSeconds)\n  return `${minutes}:${formattedSeconds}`\n}\n\nfunction StopwatchControls({ onStart, onStop, onLap, isTimerRunning }) {\n  return(\n    <div style={{ display: \"flex\", flexDirection: \"row\" }}>\n      {!isTimerRunning && <CoolButton onClick={onStart} style={{ flex: 1, margin: \"1em\", backgroundColor: \"green\" }}>Start</CoolButton>}\n      {isTimerRunning && <CoolButton onClick={onLap} style={{ flex: 1, margin: \"1em\", backgroundColor: \"blue\" }}>Lap</CoolButton>}\n      <CoolButton disabled={!isTimerRunning} onClick={onStop} style={{ flex: 1, margin: \"1em\", marginLeft: 0, backgroundColor: \"red\" }}>Stop</CoolButton>\n    </div>\n  )\n}\n\nfunction CoolButton({ children, onClick, style, disabled }) {\n  return (\n    <button onClick={onClick} style={{\n      height: \"7em\",\n      borderRadius: 8,\n      fontSize: \"15pt\",\n      border: \"none\",\n      textTransform: \"uppercase\",\n      fontWeight: \"bold\",\n      opacity: disabled ? 0.4 : 1.0,\n      ...style,\n    }}>{children}</button>\n  )\n}\n\nfunction lapDeltas(startTime, lapTimes) {\n  const lapDurations = lapTimes.map((date, i, allTimes) => {\n    const previousStop = (i === 0 ? startTime : allTimes[i - 1])\n    const lapDuration = date.getTime() - previousStop.getTime()\n    return {\n      date,\n      duration: lapDuration,\n    }\n  })\n  return lapDurations.map((duration, i, allDurations) => {\n    if (i === 0) {\n      return {\n        ...duration,\n        delta: null,\n      }\n    } else {\n      const prevDuration = allDurations[i - 1]\n      const delta = duration.duration - prevDuration.duration\n      return {\n        ...duration,\n        delta,\n      }\n    }\n  })\n}\n\nfunction LapDetail({ index, timestamp, durationSeconds, deltaSeconds }) {\n  return (\n    <div style={{\n      display: \"flex\",\n      flexDirection: \"row\",\n      margin: \"0.6em auto\",\n    }}>\n      <div style={{\n        paddingRight: \"0.4em\",\n        marginRight: \"0.4em\",\n        borderRight: \"solid 0.5px rgba(0, 0, 0, 0.5)\",\n      }}>\n        <CoolText style={{ color: \"black\" }}>{index+1}</CoolText>\n      </div>\n      <div style={{\n        display: \"flex\",\n        flexDirection: \"column\",\n      }}>\n        <span style={{fontSize: \"1.2em\"}}>\n          <CoolText style={{color: \"black\", fontWeight: \"bold\", marginRight: \"0.4em\"}}>{durationSeconds}s</CoolText>\n          <CoolText style={{color: \"black\" }}>(<CoolText style={{ color: deltaSeconds > 0 ? \"red\" : \"green\" }}>{deltaSeconds}</CoolText>)</CoolText>\n        </span>\n        <CoolText style={{color: \"black\", opacity: 0.6}}>{timestamp.toLocaleString()}</CoolText>\n      </div>\n    </div>\n  )\n}\n\nfunction useSecondsElapsed(startDate, stopDate) {\n  const currentDate = useCurrentDate(30)\n\n  if (!startDate) {\n    return 0;\n  }\n\n  const compareDate = stopDate || currentDate\n  const ms = compareDate.getTime() - startDate.getTime()\n  return ms / 1000\n}\n\nexport default Timer;","import { useState, useEffect } from \"react\"\n\nexport default function useCurrentDate(refreshRateHz = 60) {\n  const [date, setDate] = useState(new Date())\n\n  useEffect(() => {\n    const handle = setInterval(() => {\n      setDate(new Date())\n    }, 1000/refreshRateHz)\n\n    return () => clearInterval(handle)\n  }, [refreshRateHz])\n\n  return date\n}\n"],"names":["CoolMobileFullscreenLayout","children","style","display","position","top","left","bottom","right","flex","flexDirection","CoolTitle","fontFamily","textTransform","fontWeight","fontSize","color","CoolText","bold","useLocalStorageState","key","defaultValue","serialize","deserialize","v","initialValue","window","localStorage","getItem","isLocalObjectPopulated","value","JSON","parse","getLocalObject","useState","state","setState","setLocalStorageState","useCallback","newValue","normalizedValue","obj","stringified","stringify","setItem","setLocalObject","resetLocalStorageState","removeItem","removeLocalObject","dateSerilaizer","date","getTime","dateDeserializer","ms","Date","arraySerializer","elementSerializer","array","map","arrayDeserializer","elementDeserializer","secondFormatter","Intl","NumberFormat","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","StopwatchControls","onStart","onStop","onLap","isTimerRunning","CoolButton","onClick","margin","backgroundColor","disabled","marginLeft","height","borderRadius","border","opacity","LapDetail","index","timestamp","durationSeconds","deltaSeconds","paddingRight","marginRight","borderRight","toLocaleString","startTime","seconds","minutes","remainingSeconds","formattedSeconds","startDate","setStartDate","stopDate","setStopDate","laps","setLaps","elapsed","currentDate","refreshRateHz","setDate","useEffect","handle","setInterval","clearInterval","useCurrentDate","useSecondsElapsed","onTapLap","newLaps","lapD","i","allTimes","previousStop","lapDuration","duration","allDurations","delta","prevDuration","flexGrow","padding","flexShrink","background","boxShadow","lapTime","textAlign","Math","floor","format"],"sourceRoot":""}