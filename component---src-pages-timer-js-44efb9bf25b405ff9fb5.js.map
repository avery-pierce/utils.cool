{"version":3,"file":"component---src-pages-timer-js-44efb9bf25b405ff9fb5.js","mappings":"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","sources":["webpack://utils-cool/./src/components/CoolMobileFullscreenLayout.js","webpack://utils-cool/./src/components/CoolText.js","webpack://utils-cool/./src/hooks/useLocalStorageState.js","webpack://utils-cool/./src/pages/timer.js","webpack://utils-cool/./src/hooks/useCurrentDate.js"],"sourcesContent":["import React from \"react\"\n\nexport default function CoolMobileFullscreenLayout({ children, style }) {\n  return (\n    <div style={{ \n      display: \"flex\", \n      position: \"fixed\", \n      top: 0, \n      left: 0, \n      bottom: 0, \n      right: 0, \n      flex: 1, \n      flexDirection: \"column\",\n      ...style,\n    }}>\n      {children}\n    </div>\n  )\n}","import React from \"react\"\n\nexport function CoolTitle({ children, style }) {\n  return (\n    <h1 style={{\n      fontFamily: \"Monoton\",\n      textTransform: \"uppercase\",\n      fontWeight: \"normal\",\n      fontSize: \"30pt\",\n      color: \"#FFF\",\n      ...style\n    }}>{children}</h1>\n  )\n}\n\nexport default function CoolText({ children, style, bold }) {\n  return (\n    <span style={{\n      fontFamily: \"Roboto\",\n      fontWeight: bold ? \"500\" : \"normal\",\n      color: \"#FFF\",\n      ...style,\n    }}>\n      {children}\n    </span>\n  )\n}","import { useCallback, useState } from \"react\"\n\n/// Works like `useState`, except values are persisted to localStorage.\nexport default function useLocalStorageState(key, defaultValue, serialize = (v) => v, deserialize = (v) => v) {\n\n  // getLocalObject doesn't differentiate between explicitly setting null\n  // and state that's never been set. Use isLocalObjectPopulated to affirmatively\n  // determine whether state has ever been set.\n  const initialValue = isLocalObjectPopulated(key) ? deserialize(getLocalObject(key)) : defaultValue\n  const [state, setState] = useState(initialValue)\n\n  const setLocalStorageState = useCallback((newValue) => {\n    const normalizedValue = serialize(newValue)\n    setLocalObject(key, normalizedValue)\n    setState(newValue)\n  }, [])\n\n  const resetLocalStorageState = useCallback(() => {\n    removeLocalObject(key)\n  }, [])\n\n  return [state, setLocalStorageState, resetLocalStorageState]\n}\n\n/// Deserialize the json object stored in local storage\nfunction getLocalObject(key) {\n  const value = localStorage.getItem(key)\n  return JSON.parse(value)\n}\n\n/// Returns `true` if this key has never been populated.\nfunction isLocalObjectPopulated(key) {\n  return localStorage.getItem(key) !== null\n}\n\n/// Set a JSON object to local storage state\nfunction setLocalObject(key, obj) {\n  const stringified = JSON.stringify(obj)\n  return localStorage.setItem(key, stringified)\n}\n\n/// Removes the value at this key from storage\nfunction removeLocalObject(key) {\n  return localStorage.removeItem(key)\n}\n\nexport const dateSerilaizer = (date) => {\n  if (date === null) { return null }\n  return date.getTime()\n}\n\nexport const dateDeserializer = (ms) => {\n  return new Date(ms)\n}\n\nexport const arraySerializer = (elementSerializer) => {\n  return (array) => {\n    return array.map(elementSerializer)\n  }\n}\n\nexport const arrayDeserializer = (elementDeserializer) => {\n  return (array) => {\n    return array.map(elementDeserializer)\n  }\n}","import React, { useCallback } from 'react';\nimport CoolMobileFullscreenLayout from '../components/CoolMobileFullscreenLayout';\nimport useCurrentDate from \"../hooks/useCurrentDate\"\nimport CoolText from '../components/CoolText';\nimport useLocalStorageState, { dateSerilaizer, dateDeserializer, arraySerializer, arrayDeserializer } from '../hooks/useLocalStorageState';\n\nconst Timer = () => {\n  const [startDate, setStartDate] = useLocalStorageState(\"timer.startDate\", null, dateSerilaizer, dateDeserializer)\n  const [stopDate, setStopDate] = useLocalStorageState(\"timer.stopDate\", null, dateSerilaizer, dateDeserializer)\n  const [laps, setLaps] = useLocalStorageState(\"timer.laps\", [], arraySerializer(dateSerilaizer), arrayDeserializer(dateDeserializer))\n  \n  const elapsed = useSecondsElapsed(startDate, stopDate)\n  const onStart = useCallback(() => {\n    setStartDate(new Date()) \n    setStopDate(null)\n    setLaps([])\n  }, [])\n\n  const onStop = useCallback(() => {\n    setStopDate(new Date())\n  }, [])\n\n  const onTapLap = useCallback(() => {\n    const newLaps = [\n      ...laps,\n      new Date(),\n    ]\n    setLaps(newLaps)\n  }, [laps])\n\n  const lapD = lapDeltas(startDate, laps)\n  const isTimerRunning = (!!startDate && !stopDate)\n  return (\n    <CoolMobileFullscreenLayout>\n      <div style={{ flexGrow: 1 }}>\n      </div>\n      <div style={{ padding: \"1em\", flexShrink: 2 }}>\n        <div style={{\n          background: \"rgba(233, 233, 233, 0.65)\",\n          boxShadow: \"0px 4px 12px rgba(0, 0, 0, 0.2)\",\n          borderRadius: 8,\n          padding: \"1em\",\n        }}>\n          {lapD.map((lapTime, i) => (\n            <LapDetail \n              key={lapTime.date.getTime()}\n              index={i} \n              durationSeconds={lapTime.duration / 1000} \n              deltaSeconds={lapTime.delta / 1000} \n              timestamp={lapTime.date} />\n          ))}\n        </div>\n      </div>\n      <div style={{ padding: \"1em\" }}>\n        <CoolText bold style={{\n          display: \"block\",\n          textAlign: \"center\",\n          fontSize: \"60pt\",\n        }}>{formatTimeInterval(elapsed)}</CoolText>\n      </div>\n      <StopwatchControls\n        onStart={onStart}\n        onStop={onStop}\n        onLap={onTapLap}\n        isTimerRunning={isTimerRunning} />\n    </CoolMobileFullscreenLayout>\n  )\n}\n\nconst secondFormatter = new Intl.NumberFormat(\"en-US\", { \n  minimumIntegerDigits: 2, \n  minimumFractionDigits: 2, \n  maximumFractionDigits: 2,\n})\n\nfunction formatTimeInterval(seconds) {\n  const minutes = Math.floor(seconds / 60);\n  const remainingSeconds = seconds % 60;\n  const formattedSeconds = secondFormatter.format(remainingSeconds)\n  return `${minutes}:${formattedSeconds}`\n}\n\nfunction StopwatchControls({ onStart, onStop, onLap, isTimerRunning }) {\n  return(\n    <div style={{ display: \"flex\", flexDirection: \"row\" }}>\n      {!isTimerRunning && <CoolButton onClick={onStart} style={{ flex: 1, margin: \"1em\", backgroundColor: \"green\" }}>Start</CoolButton>}\n      {isTimerRunning && <CoolButton onClick={onLap} style={{ flex: 1, margin: \"1em\", backgroundColor: \"blue\" }}>Lap</CoolButton>}\n      <CoolButton disabled={!isTimerRunning} onClick={onStop} style={{ flex: 1, margin: \"1em\", marginLeft: 0, backgroundColor: \"red\" }}>Stop</CoolButton>\n    </div>\n  )\n}\n\nfunction CoolButton({ children, onClick, style, disabled }) {\n  return (\n    <button onClick={onClick} style={{\n      height: \"7em\",\n      borderRadius: 8,\n      fontSize: \"15pt\",\n      border: \"none\",\n      textTransform: \"uppercase\",\n      fontWeight: \"bold\",\n      opacity: disabled ? 0.4 : 1.0,\n      ...style,\n    }}>{children}</button>\n  )\n}\n\nfunction lapDeltas(startTime, lapTimes) {\n  const lapDurations = lapTimes.map((date, i, allTimes) => {\n    const previousStop = (i === 0 ? startTime : allTimes[i - 1])\n    const lapDuration = date.getTime() - previousStop.getTime()\n    return {\n      date,\n      duration: lapDuration,\n    }\n  })\n  return lapDurations.map((duration, i, allDurations) => {\n    if (i === 0) {\n      return {\n        ...duration,\n        delta: null,\n      }\n    } else {\n      const prevDuration = allDurations[i - 1]\n      const delta = duration.duration - prevDuration.duration\n      return {\n        ...duration,\n        delta,\n      }\n    }\n  })\n}\n\nfunction LapDetail({ index, timestamp, durationSeconds, deltaSeconds }) {\n  return (\n    <div style={{\n      display: \"flex\",\n      flexDirection: \"row\",\n      margin: \"0.6em auto\",\n    }}>\n      <div style={{\n        paddingRight: \"0.4em\",\n        marginRight: \"0.4em\",\n        borderRight: \"solid 0.5px rgba(0, 0, 0, 0.5)\",\n      }}>\n        <CoolText style={{ color: \"black\" }}>{index+1}</CoolText>\n      </div>\n      <div style={{\n        display: \"flex\",\n        flexDirection: \"column\",\n      }}>\n        <span style={{fontSize: \"1.2em\"}}>\n          <CoolText style={{color: \"black\", fontWeight: \"bold\", marginRight: \"0.4em\"}}>{durationSeconds}s</CoolText>\n          <CoolText style={{color: \"black\" }}>(<CoolText style={{ color: deltaSeconds > 0 ? \"red\" : \"green\" }}>{deltaSeconds}</CoolText>)</CoolText>\n        </span>\n        <CoolText style={{color: \"black\", opacity: 0.6}}>{timestamp.toLocaleString()}</CoolText>\n      </div>\n    </div>\n  )\n}\n\nfunction useSecondsElapsed(startDate, stopDate) {\n  const currentDate = useCurrentDate(30)\n\n  if (!startDate) {\n    return 0;\n  }\n\n  const compareDate = stopDate || currentDate\n  const ms = compareDate.getTime() - startDate.getTime()\n  return ms / 1000\n}\n\nexport default Timer;","import { useState, useEffect } from \"react\"\n\nexport default function useCurrentDate(refreshRateHz = 60) {\n  const [date, setDate] = useState(new Date())\n\n  useEffect(() => {\n    const handle = setInterval(() => {\n      setDate(new Date())\n    }, 1000/refreshRateHz)\n\n    return () => clearInterval(handle)\n  }, [refreshRateHz])\n\n  return date\n}"],"names":["CoolMobileFullscreenLayout","children","style","display","position","top","left","bottom","right","flex","flexDirection","CoolText","bold","fontFamily","fontWeight","color","useLocalStorageState","key","defaultValue","serialize","deserialize","v","initialValue","localStorage","getItem","isLocalObjectPopulated","value","JSON","parse","getLocalObject","useState","state","setState","setLocalStorageState","useCallback","newValue","normalizedValue","obj","stringified","stringify","setItem","setLocalObject","resetLocalStorageState","removeItem","removeLocalObject","dateSerilaizer","date","getTime","dateDeserializer","ms","Date","secondFormatter","Intl","NumberFormat","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","StopwatchControls","onStart","onStop","onLap","isTimerRunning","CoolButton","onClick","margin","backgroundColor","disabled","marginLeft","height","borderRadius","fontSize","border","textTransform","opacity","LapDetail","index","timestamp","durationSeconds","deltaSeconds","paddingRight","marginRight","borderRight","toLocaleString","elementDeserializer","elementSerializer","startTime","seconds","minutes","remainingSeconds","formattedSeconds","startDate","setStartDate","stopDate","setStopDate","array","map","laps","setLaps","elapsed","currentDate","refreshRateHz","setDate","useEffect","handle","setInterval","clearInterval","useCurrentDate","useSecondsElapsed","onTapLap","newLaps","lapD","i","allTimes","previousStop","lapDuration","duration","allDurations","delta","prevDuration","flexGrow","padding","flexShrink","background","boxShadow","lapTime","textAlign","Math","floor","format"],"sourceRoot":""}